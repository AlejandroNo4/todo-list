(()=>{"use strict";function e(e,t){this.title=e,this.id=t}const t=()=>{let t=[];return{setProject:n=>{t=localStorage.getItem("projects")?JSON.parse(localStorage.getItem("projects")):[{title:"Default",id:1}];const d=new e(n,t.length+1);t.push(d),localStorage.setItem("projects",JSON.stringify(t))},getProjects:()=>(t=localStorage.getItem("projects")?JSON.parse(localStorage.getItem("projects")):[{title:"Default",id:1}],t),deleteProject:e=>{t=localStorage.getItem("projects")?JSON.parse(localStorage.getItem("projects")):[];for(let n=0;n<t.length;n+=1)e===t[n].id&&(t.splice(n,1),localStorage.setItem("projects",JSON.stringify(t)),window.location.reload())}}};function n(e,t){this.title=e,this.id=t}const d=()=>{let e=[{title:"Default",id:1}];return{newSession:(t,d)=>{e=localStorage.getItem("session")?JSON.parse(localStorage.getItem("session")):[{title:"Default",id:1}];const o=new n(t,d);e=[o],localStorage.setItem("session",JSON.stringify(e))},getSession:()=>(e=localStorage.getItem("session")?JSON.parse(localStorage.getItem("session")):[{title:"Default",id:1}],e)}};function o(e,t,n,d,o,s){this.name=e,this.project=t,this.dueDate=n,this.priority=d,this.description=o,this.id=s}const s=()=>{let e=[];return{setTodo:(t,n,d,s,a)=>{e=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):[];const i=new o(t,n,d,s,a,e.length+1);e.push(i),localStorage.setItem("todos",JSON.stringify(e))},getTodos:()=>(e=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):[],e),deleteTodo:t=>{e=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):[];for(let n=0;n<e.length;n+=1)t===e[n].id&&(e.splice(n,1),localStorage.setItem("todos",JSON.stringify(e)),window.location.reload())},editTodo:(t,n,d,o,s,a)=>{e=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):[];for(let i=0;i<e.length;i+=1)t===e[i].id&&(e[i].name=n,e[i].project=d,e[i].dueDate=o,e[i].priority=s,e[i].description=a,localStorage.setItem("todos",JSON.stringify(e)),window.location.reload())}}},a=(e,n)=>{const o=(()=>{const e=t(),n=s(),d=document.createElement("form");d.classList.add("new-todo-form","d-none","box-shadow");const o=document.createElement("input");o.placeholder="Name",o.setAttribute("required",""),o.maxLength=50;const a=document.createElement("input");a.type="date",a.setAttribute("required","");let i=new Date,l=i.getDate(),c=i.getMonth()+1;const r=i.getFullYear();l<10&&(l=`0${l}`),c<10&&(c=`0${c}`),i=`${r}-${c}-${l}`,a.setAttribute("min",i);const p=document.createElement("select"),m=document.createElement("option");m.innerText="None";const u=document.createElement("option");u.innerText="Medium";const h=document.createElement("option");h.innerText="High",p.appendChild(m),p.appendChild(u),p.appendChild(h);const g=document.createElement("select");e.getProjects().forEach((e=>{const t=document.createElement("option");t.innerText=e.title,t.value=e.id,g.appendChild(t)}));const E=document.createElement("textarea");E.setAttribute("rows","3"),E.placeholder="Description",E.maxLength=250,E.setAttribute("required","");const L=document.createElement("button");L.classList.add("btn","submit-btn"),L.innerText="Create to-do";const S=document.createElement("label");S.innerText="Due Date";const x=document.createElement("label");x.innerText="Select priority";const f=document.createElement("label");return f.innerText="For the project:",d.appendChild(o),d.appendChild(S),d.appendChild(a),d.appendChild(x),d.appendChild(p),d.appendChild(f),d.appendChild(g),d.appendChild(E),d.appendChild(L),{appendForm:()=>d,showAddForm:()=>{L.innerText="Create to-do",d.classList.contains("d-none")?d.classList.replace("d-none","d-flex"):d.classList.replace("d-flex","d-none"),d.addEventListener("submit",(()=>{const e=o.value,t=g.value,d=a.value,s=p.value,i=E.value;n.setTodo(e,t,d,s,i)}))},showEditForm:e=>{d.classList.contains("d-none")?d.classList.replace("d-none","d-flex"):d.classList.replace("d-flex","d-none"),L.innerText="Edit",d.addEventListener("submit",(()=>{const t=o.value,d=g.value,s=a.value,i=p.value,l=E.value;n.editTodo(e,t,d,s,i,l)}))}}})(),a=t(),i=d(),l=document.createElement("div");l.classList.add("todo-items");const c=s(),r=document.createElement("h1");r.classList.add("main-title","padding"),r.innerText=e;const p=document.createElement("div");p.classList.add("cards-container");const m=document.createElement("div");m.classList.add("new-btn"),m.innerText="New To-Do +";const u=document.createElement("div");return u.innerText="Delete this project",u.classList.add("delete-project-btn","d-none"),1!==n?u.classList.remove("d-none"):u.classList.add("d-none"),u.addEventListener("click",(()=>{i.newSession("Default",1),a.deleteProject(n),c.getTodos().forEach((e=>{n.toString()===e.project&&c.deleteTodo(e.id)}))})),l.appendChild(u),l.appendChild(r),l.appendChild(m),l.appendChild(o.appendForm(n)),l.appendChild(p),m.addEventListener("click",(()=>{o.showAddForm()})),c.getTodos().forEach((e=>{if(n.toString()===e.project){const t=document.createElement("div");t.classList.add("card","d-flex","padding");const n=document.createElement("div");n.classList.add("d-flex","flex-column","title-date");const d=document.createElement("h3");d.classList.add("card-title"),d.innerText=e.name;const s=document.createElement("p");s.classList.add("card-date"),s.innerText=e.dueDate;const a=document.createElement("div");a.innerText=e.description,a.classList.add("card-description","padding"),n.appendChild(d),n.appendChild(s);const i=document.createElement("div");i.classList.add("d-flex","flex-column");const l=document.createElement("button");l.innerText="Delete",l.classList.add("btn");const r=document.createElement("button");r.innerText="Edit",r.classList.add("btn"),i.appendChild(l),i.appendChild(r),t.appendChild(n),t.appendChild(a),t.appendChild(i),"Medium"===e.priority&&t.classList.add("medium-priority"),"High"===e.priority&&t.classList.add("high-priority"),p.appendChild(t),r.addEventListener("click",(()=>{o.showEditForm(e.id)})),l.addEventListener("click",(()=>{c.deleteTodo(e.id)}))}})),l},{body:i}=document;i.classList.add("d-flex");const l=d();i.appendChild((()=>{const e=document.createElement("div"),n=document.createElement("h1");n.innerText="To-do list.",n.classList.add("main-title","padding"),e.appendChild(n);const d=document.createElement("ul");return d.classList.add("d-flex","flex-column"),e.appendChild(d),t().getProjects().forEach((e=>{const t=document.createElement("li");t.classList.add("project-item"),t.innerText=e.title,d.appendChild(t),t.addEventListener("click",(()=>{l.newSession(e.title,e.id),i.replaceChild(a(e.title,e.id),i.children[3])}))})),e.appendChild((()=>{const e=document.createElement("div"),n=document.createElement("form"),d=document.createElement("input"),o=document.createElement("button"),s=t();d.placeholder="Project Name",d.setAttribute("required",""),d.maxLength=25,o.innerText="Create",o.classList.add("btn","submit-btn"),n.appendChild(d),n.appendChild(o),n.classList.add("d-none","padding");const a=document.createElement("div");return a.innerText="New project +",a.classList.add("new-btn"),a.addEventListener("click",(()=>{n.classList.contains("d-none")?(n.classList.remove("d-none"),n.classList.add("d-flex","flex-column")):(n.classList.remove("d-flex"),n.classList.add("d-none"))})),n.addEventListener("submit",(()=>{const e=d.value;s.setProject(e)})),e.appendChild(a),e.appendChild(n),e})()),e})()),i.appendChild(a(l.getSession()[0].title,l.getSession()[0].id))})();