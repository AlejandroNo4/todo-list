(()=>{"use strict";function e(e,t){this.title=e,this.id=t}const t=()=>{let t=[];return{setProject:n=>{t=localStorage.getItem("projects")?JSON.parse(localStorage.getItem("projects")):[{title:"Default",id:1}];const d=t.length+1;if(""===n||void 0===n)throw new Error("Title is undefined!");const o=new e(n,d);t.push(o),localStorage.setItem("projects",JSON.stringify(t))},getProjects:()=>(t=localStorage.getItem("projects")?JSON.parse(localStorage.getItem("projects")):[{title:"Default",id:1}],t),deleteProject:e=>{if(t=localStorage.getItem("projects")?JSON.parse(localStorage.getItem("projects")):[],void 0===e||1===e||e>t.length)throw new Error("The project id to delete is invalid!");for(let n=0;n<t.length;n+=1)e===t[n].id&&(t.splice(n,1),localStorage.setItem("projects",JSON.stringify(t)),window.location.reload())}}};function n(e,t){this.title=e,this.id=t}const d=()=>{let e=[{title:"Default",id:1}];return{newSession:(t,d)=>{if(e=localStorage.getItem("session")?JSON.parse(localStorage.getItem("session")):[{title:"Default",id:1}],void 0===d||void 0===t)throw new Error("Session id or title is undefined!");if(""===t)throw new Error("Something went wrong, title must not be blank!");const o=new n(t,d);e=[o],localStorage.setItem("session",JSON.stringify(e))},getSession:()=>(e=localStorage.getItem("session")?JSON.parse(localStorage.getItem("session")):[{title:"Default",id:1}],e)}};function o(e,t,n,d,o,i){this.name=e,this.project=t,this.dueDate=n,this.priority=d,this.description=o,this.id=i}const i=()=>{let e=[];return{setTodo:(t,n,d,i,s)=>{e=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):[];const a=new o(t,n,d,i,s,e.length+1);e.push(a),localStorage.setItem("todos",JSON.stringify(e))},getTodos:()=>(e=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):[],e),deleteTodo:t=>{e=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):[];for(let n=0;n<e.length;n+=1)t===e[n].id&&(e.splice(n,1),localStorage.setItem("todos",JSON.stringify(e)),window.location.reload())},editTodo:(t,n,d,o,i,s)=>{e=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):[];for(let a=0;a<e.length;a+=1)t===e[a].id&&(e[a].name=n,e[a].project=d,e[a].dueDate=o,e[a].priority=i,e[a].description=s,localStorage.setItem("todos",JSON.stringify(e)),window.location.reload())}}},s=(e,n)=>{const o=(()=>{const e=t(),n=i(),d=document.createElement("form");d.classList.add("new-todo-form","d-none","box-shadow");const o=document.createElement("input");o.placeholder="Name",o.setAttribute("required",""),o.maxLength=50;const s=document.createElement("input");s.type="date",s.setAttribute("required","");let a=new Date,l=a.getDate(),c=a.getMonth()+1;const r=a.getFullYear();l<10&&(l=`0${l}`),c<10&&(c=`0${c}`),a=`${r}-${c}-${l}`,s.setAttribute("min",a);const p=document.createElement("select"),m=document.createElement("option");m.innerText="None";const u=document.createElement("option");u.innerText="Medium";const h=document.createElement("option");h.innerText="High",p.appendChild(m),p.appendChild(u),p.appendChild(h);const g=document.createElement("select");e.getProjects().forEach((e=>{const t=document.createElement("option");t.innerText=e.title,t.value=e.id,g.appendChild(t)}));const E=document.createElement("textarea");E.setAttribute("rows","3"),E.placeholder="Description",E.maxLength=250,E.setAttribute("required","");const S=document.createElement("button");S.classList.add("btn","submit-btn"),S.innerText="Create to-do";const L=document.createElement("label");L.innerText="Due Date";const f=document.createElement("label");f.innerText="Select priority";const x=document.createElement("label");return x.innerText="For the project:",d.appendChild(o),d.appendChild(L),d.appendChild(s),d.appendChild(f),d.appendChild(p),d.appendChild(x),d.appendChild(g),d.appendChild(E),d.appendChild(S),{appendForm:()=>d,showAddForm:()=>{S.innerText="Create to-do",d.classList.contains("d-none")?d.classList.replace("d-none","d-flex"):d.classList.replace("d-flex","d-none"),d.addEventListener("submit",(()=>{const e=o.value,t=g.value,d=s.value,i=p.value,a=E.value;n.setTodo(e,t,d,i,a)}))},showEditForm:e=>{d.classList.contains("d-none")?d.classList.replace("d-none","d-flex"):d.classList.replace("d-flex","d-none"),S.innerText="Edit",d.addEventListener("submit",(()=>{const t=o.value,d=g.value,i=s.value,a=p.value,l=E.value;n.editTodo(e,t,d,i,a,l)}))}}})(),s=t(),a=d(),l=document.createElement("div");l.classList.add("todo-items");const c=i(),r=document.createElement("h1");r.classList.add("main-title","padding"),r.innerText=e;const p=document.createElement("div");p.classList.add("cards-container");const m=document.createElement("div");m.classList.add("new-btn"),m.innerText="New To-Do +";const u=document.createElement("div");return u.innerText="Delete this project",u.classList.add("delete-project-btn","d-none"),1!==n?u.classList.remove("d-none"):u.classList.add("d-none"),u.addEventListener("click",(()=>{a.newSession("Default",1),s.deleteProject(n),c.getTodos().forEach((e=>{n.toString()===e.project&&c.deleteTodo(e.id)}))})),l.appendChild(u),l.appendChild(r),l.appendChild(m),l.appendChild(o.appendForm(n)),l.appendChild(p),m.addEventListener("click",(()=>{o.showAddForm()})),c.getTodos().forEach((e=>{if(n.toString()===e.project){const t=document.createElement("div");t.classList.add("card","d-flex","padding");const n=document.createElement("div");n.classList.add("d-flex","flex-column","title-date");const d=document.createElement("h3");d.classList.add("card-title"),d.innerText=e.name;const i=document.createElement("p");i.classList.add("card-date"),i.innerText=e.dueDate;const s=document.createElement("div");s.innerText=e.description,s.classList.add("card-description","padding"),n.appendChild(d),n.appendChild(i);const a=document.createElement("div");a.classList.add("d-flex","flex-column");const l=document.createElement("button");l.innerText="Delete",l.classList.add("btn");const r=document.createElement("button");r.innerText="Edit",r.classList.add("btn"),a.appendChild(l),a.appendChild(r),t.appendChild(n),t.appendChild(s),t.appendChild(a),"Medium"===e.priority&&t.classList.add("medium-priority"),"High"===e.priority&&t.classList.add("high-priority"),p.appendChild(t),r.addEventListener("click",(()=>{o.showEditForm(e.id)})),l.addEventListener("click",(()=>{c.deleteTodo(e.id)}))}})),l},{body:a}=document;a.classList.add("d-flex");const l=d();a.appendChild((()=>{const e=document.createElement("div"),n=document.createElement("h1");n.innerText="To-do list.",n.classList.add("main-title","padding"),e.appendChild(n);const d=document.createElement("ul");return d.classList.add("d-flex","flex-column"),e.appendChild(d),t().getProjects().forEach((e=>{const t=document.createElement("li");t.classList.add("project-item"),t.innerText=e.title,d.appendChild(t),t.addEventListener("click",(()=>{l.newSession(e.title,e.id),a.replaceChild(s(e.title,e.id),a.children[3])}))})),e.appendChild((()=>{const e=document.createElement("div"),n=document.createElement("form"),d=document.createElement("input"),o=document.createElement("button"),i=t();d.placeholder="Project Name",d.setAttribute("required",""),d.maxLength=25,o.innerText="Create",o.classList.add("btn","submit-btn"),n.appendChild(d),n.appendChild(o),n.classList.add("d-none","padding");const s=document.createElement("div");return s.innerText="New project +",s.classList.add("new-btn"),s.addEventListener("click",(()=>{n.classList.contains("d-none")?(n.classList.remove("d-none"),n.classList.add("d-flex","flex-column")):(n.classList.remove("d-flex"),n.classList.add("d-none"))})),n.addEventListener("submit",(()=>{const e=d.value;i.setProject(e)})),e.appendChild(s),e.appendChild(n),e})()),e})()),a.appendChild(s(l.getSession()[0].title,l.getSession()[0].id))})();