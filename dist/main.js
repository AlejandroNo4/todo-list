(()=>{"use strict";function e(e,t){this.title=e,this.id=t}const t=function(){var t=[];return{setProject:function(n){var a=new e(n,(t=localStorage.getItem("projects")?JSON.parse(localStorage.getItem("projects")):[{title:"Default",id:1}]).length+1);t.push(a),localStorage.setItem("projects",JSON.stringify(t))},getProjects:function(){return t=localStorage.getItem("projects")?JSON.parse(localStorage.getItem("projects")):[{title:"Default",id:1}]},deleteProject:function(e){t=localStorage.getItem("projects")?JSON.parse(localStorage.getItem("projects")):[];for(var n=0;n<t.length;n+=1)e===t[n].id&&(t.splice(n,1),localStorage.setItem("projects",JSON.stringify(t)),window.location.reload())}}};function n(e,t){this.title=e,this.id=t}const a=function(){var e=[{title:"Default",id:1}];return{newSession:function(t,a){e=localStorage.getItem("session")?JSON.parse(localStorage.getItem("session")):[{title:"Default",id:1}];var d=new n(t,a);e=[d],localStorage.setItem("session",JSON.stringify(e))},getSession:function(){return e=localStorage.getItem("session")?JSON.parse(localStorage.getItem("session")):[{title:"Default",id:1}]}}};function d(e,t,n,a,d,i){this.name=e,this.project=t,this.dueDate=n,this.priority=a,this.description=d,this.id=i}const i=function(){var e=[];return{setTodo:function(t,n,a,i,o){var r=new d(t,n,a,i,o,(e=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):[]).length+1);e.push(r),localStorage.setItem("todos",JSON.stringify(e))},getTodos:function(){return e=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):[]},deleteTodo:function(t){e=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):[];for(var n=0;n<e.length;n+=1)t===e[n].id&&(e.splice(n,1),localStorage.setItem("todos",JSON.stringify(e)),window.location.reload())},editTodo:function(t,n,a,d,i,o){e=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):[];for(var r=0;r<e.length;r+=1)t===e[r].id&&(e[r].name=n,e[r].project=a,e[r].dueDate=d,e[r].priority=i,e[r].description=o,localStorage.setItem("todos",JSON.stringify(e)),window.location.reload())}}},o=function(e,n){var d=function(){var e=t(),n=i(),a=document.createElement("form");a.classList.add("new-todo-form","d-none","box-shadow");var d=document.createElement("input");d.placeholder="Name",d.setAttribute("required",""),d.maxLength=50;var o=document.createElement("input");o.type="date",o.setAttribute("required","");var r=document.createElement("select"),l=document.createElement("option");l.innerText="None";var c=document.createElement("option");c.innerText="Medium";var s=document.createElement("option");s.innerText="High",r.appendChild(l),r.appendChild(c),r.appendChild(s);var p=document.createElement("select");e.getProjects().forEach((function(e){var t=document.createElement("option");t.innerText=e.title,t.value=e.id,p.appendChild(t)}));var u=document.createElement("textarea");u.setAttribute("rows","3"),u.placeholder="Description",u.maxLength=250,u.setAttribute("required","");var m=document.createElement("button");m.classList.add("btn"),m.innerText="Create to-do";var v=document.createElement("label");v.innerText="Due Date";var h=document.createElement("label");h.innerText="Select priority";var g=document.createElement("label");return g.innerText="For the project:",a.appendChild(d),a.appendChild(v),a.appendChild(o),a.appendChild(h),a.appendChild(r),a.appendChild(g),a.appendChild(p),a.appendChild(u),a.appendChild(m),{appendForm:function(){return a},showAddForm:function(){m.innerText="Create to-do",a.classList.contains("d-none")?a.classList.replace("d-none","d-flex"):a.classList.replace("d-flex","d-none"),a.addEventListener("submit",(function(){var e=d.value,t=p.value,a=o.value,i=r.value,l=u.value;n.setTodo(e,t,a,i,l)}))},showEditForm:function(e){a.classList.contains("d-none")?a.classList.replace("d-none","d-flex"):a.classList.replace("d-flex","d-none"),m.innerText="Edit",a.addEventListener("submit",(function(){var t=d.value,a=p.value,i=o.value,l=r.value,c=u.value;n.editTodo(e,t,a,i,l,c)}))}}}(),o=t(),r=a(),l=document.createElement("div");l.classList.add("todo-items");var c=i(),s=document.createElement("h1");s.classList.add("project-title"),s.innerText=e;var p=document.createElement("div");p.classList.add("cards-container");var u=document.createElement("div");u.classList.add("new-btn"),u.innerText="New To-Do +";var m=document.createElement("div");return m.innerText="Delete this project",m.classList.add("delete-project-btn","d-none"),1!==n?m.classList.remove("d-none"):m.classList.add("d-none"),m.addEventListener("click",(function(){r.newSession("Default",1),o.deleteProject(n),c.getTodos().forEach((function(e){n.toString()===e.project&&c.deleteTodo(e.id)}))})),l.appendChild(m),l.appendChild(s),l.appendChild(u),l.appendChild(d.appendForm(n)),l.appendChild(p),u.addEventListener("click",(function(){d.showAddForm()})),c.getTodos().forEach((function(e){if(n.toString()===e.project){var t=document.createElement("div");t.classList.add("card","d-flex","padding");var a=document.createElement("div");a.classList.add("d-flex","flex-column","title-date");var i=document.createElement("h3");i.classList.add("card-title"),i.innerText=e.name;var o=document.createElement("p");o.classList.add("card-date"),o.innerText=e.dueDate;var r=document.createElement("div");r.innerText=e.description,r.classList.add("card-description","padding"),a.appendChild(i),a.appendChild(o);var l=document.createElement("div");l.classList.add("d-flex","flex-column");var s=document.createElement("button");s.innerText="Delete",s.classList.add("btn");var u=document.createElement("button");u.innerText="Edit",u.classList.add("btn"),l.appendChild(s),l.appendChild(u),t.appendChild(a),t.appendChild(r),t.appendChild(l),"Medium"===e.priority&&t.classList.add("medium-priority"),"High"===e.priority&&t.classList.add("high-priority"),p.appendChild(t),u.addEventListener("click",(function(){d.showEditForm(e.id)})),s.addEventListener("click",(function(){c.deleteTodo(e.id)}))}})),l};var r=document.body;r.classList.add("d-flex");var l=a();r.appendChild(function(){var e=document.createElement("div"),n=document.createElement("h1");n.innerText="To-do list.",n.classList.add("main-title","padding"),e.appendChild(n);var a=document.createElement("ul");return a.classList.add("d-flex","flex-column"),e.appendChild(a),t().getProjects().forEach((function(e){var t=document.createElement("li");t.classList.add("project-item"),t.classList.remove("bg-dark"),t.innerText=e.title,a.appendChild(t),t.addEventListener("click",(function(){l.newSession(e.title,e.id),r.replaceChild(o(e.title,e.id),r.children[3])}))})),e.appendChild(function(){var e=document.createElement("div"),n=document.createElement("form"),a=document.createElement("input"),d=document.createElement("button"),i=t();a.placeholder="Project Name",a.setAttribute("required",""),a.maxLength=25,d.innerText="Create",d.classList.add("btn"),n.appendChild(a),n.appendChild(d),n.classList.add("d-none","padding");var o=document.createElement("div");return o.innerText="New project +",o.classList.add("new-btn"),o.addEventListener("click",(function(){n.classList.contains("d-none")?(n.classList.remove("d-none"),n.classList.add("d-flex","flex-column")):(n.classList.remove("d-flex"),n.classList.add("d-none"))})),n.addEventListener("submit",(function(){var e=a.value;i.setProject(e)})),e.appendChild(o),e.appendChild(n),e}()),e}()),r.appendChild(o(l.getSession()[0].title,l.getSession()[0].id))})();