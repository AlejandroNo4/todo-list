(()=>{"use strict";function e(e,t){this.title=e,this.id=t}var t=function(){var t=[],n=new e("Default",1);return t.push(n),{setProject:function(n){var d=new e(n,(t=localStorage.getItem("projects")?JSON.parse(localStorage.getItem("projects")):[]).length+1);t.push(d),localStorage.setItem("projects",JSON.stringify(t))},getProjects:function(){return t=localStorage.getItem("projects")?JSON.parse(localStorage.getItem("projects")):[]},deleteProject:function(e){t=localStorage.getItem("projects")?JSON.parse(localStorage.getItem("projects")):[];for(var n=0;n<t.length;n+=1)e===t[n].id&&(t.splice(n,1),localStorage.setItem("projects",JSON.stringify(t)),window.location.reload())}}},n=document.body;n.classList.add("d-flex");var d=t();function a(e,t,n,d,a,i){this.name=e,this.project=t,this.dueDate=n,this.priority=d,this.description=a,this.id=i}var i=function(){var e=[];return{setTodo:function(t,n,d,i,o){var r=new a(t,n,d,i,o,(e=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):[]).length+1);e.push(r),localStorage.setItem("todos",JSON.stringify(e))},getTodos:function(){return e=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):[]},deleteTodo:function(t){e=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):[];for(var n=0;n<e.length;n+=1)t===e[n].id&&(e.splice(n,1),localStorage.setItem("todos",JSON.stringify(e)),window.location.reload())},editTodo:function(t,n,d,a,i,o){e=localStorage.getItem("todos")?JSON.parse(localStorage.getItem("todos")):[];for(var r=0;r<e.length;r+=1)t===e[r].id&&(e[r].name=n,e[r].project=d,e[r].dueDate=a,e[r].priority=i,e[r].description=o,localStorage.setItem("todos",JSON.stringify(e)),window.location.reload())}}},o=function(e,n){var d=function(){var e=t(),n=i(),d=document.createElement("form");d.classList.add("new-todo-form","d-none","box-shadow");var a=document.createElement("input");a.placeholder="Name",a.setAttribute("required",""),a.maxLength=50;var o=document.createElement("input");o.type="date",o.setAttribute("required","");var r=document.createElement("select"),l=document.createElement("option");l.innerText="None";var c=document.createElement("option");c.innerText="Medium";var s=document.createElement("option");s.innerText="High",r.appendChild(l),r.appendChild(c),r.appendChild(s);var p=document.createElement("select");e.getProjects().forEach((function(e){var t=document.createElement("option");t.innerText=e.title,t.value=e.id,p.appendChild(t)}));var m=document.createElement("textarea");m.setAttribute("rows","3"),m.placeholder="Description",m.maxLength=250,m.setAttribute("required","");var u=document.createElement("button");u.classList.add("btn"),u.innerText="Create to-do";var v=document.createElement("label");v.innerText="Due Date";var h=document.createElement("label");h.innerText="Select priority";var f=document.createElement("label");return f.innerText="For the project:",d.appendChild(a),d.appendChild(v),d.appendChild(o),d.appendChild(h),d.appendChild(r),d.appendChild(f),d.appendChild(p),d.appendChild(m),d.appendChild(u),{appendForm:function(){return d},showAddForm:function(){u.innerText="Create to-do",d.classList.contains("d-none")?d.classList.replace("d-none","d-flex"):d.classList.replace("d-flex","d-none"),d.addEventListener("submit",(function(e){var t=a.value,d=p.value,i=o.value,l=r.value,c=m.value;n.setTodo(t,d,i,l,c)}))},showEditForm:function(e){d.classList.contains("d-none")?d.classList.replace("d-none","d-flex"):d.classList.replace("d-flex","d-none"),u.innerText="Edit",d.addEventListener("submit",(function(t){var d=a.value,i=p.value,l=o.value,c=r.value,s=m.value;n.editTodo(e,d,i,l,c,s)}))}}}(),a=document.createElement("div");a.classList.add("todo-items");var o=i(),r=document.createElement("h1");r.classList.add("project-title"),r.innerText=e;var l=document.createElement("div");l.classList.add("cards-container");var c=document.createElement("div");return c.classList.add("new-btn"),c.innerText="New To-Do +",a.appendChild(r),a.appendChild(c),a.appendChild(d.appendForm(n)),a.appendChild(l),c.addEventListener("click",(function(){d.showAddForm()})),o.getTodos().forEach((function(e){if(n==e.project){var t=document.createElement("div");t.classList.add("card","d-flex","padding");var a=document.createElement("div");a.classList.add("d-flex","flex-column","title-date");var i=document.createElement("h3");i.classList.add("card-title"),i.innerText=e.name;var r=document.createElement("p");r.classList.add("card-date"),r.innerText=e.dueDate;var c=document.createElement("div");c.innerText=e.description,c.classList.add("card-description","padding"),a.appendChild(i),a.appendChild(r);var s=document.createElement("div");s.classList.add("d-flex","flex-column");var p=document.createElement("button");p.innerText="Delete",p.classList.add("btn");var m=document.createElement("button");m.innerText="Edit",m.classList.add("btn"),s.appendChild(p),s.appendChild(m),t.appendChild(a),t.appendChild(c),t.appendChild(s),"Medium"===e.priority&&t.classList.add("medium-priority"),"High"===e.priority&&t.classList.add("high-priority"),l.appendChild(t),m.addEventListener("click",(function(){d.showEditForm(e.id)})),p.addEventListener("click",(function(){o.deleteTodo(e.id)}))}})),a};n.appendChild(function(){var e=document.createElement("div"),d=document.createElement("h1");d.innerText="To-do list.",d.classList.add("main-title","padding"),e.appendChild(d);var a=document.createElement("ul");a.classList.add("d-flex","flex-column"),e.appendChild(a);var i=t(),r=document.createElement("div");return r.innerText="Delete this project",r.classList.add("new-btn","d-none"),e.appendChild(r),i.getProjects().forEach((function(e){var t=document.createElement("li");t.classList.add("project-item"),t.classList.remove("bg-dark"),t.innerText=e.title,a.appendChild(t),t.addEventListener("click",(function(){n.replaceChild(o(e.title,e.id),n.children[3]),1!==e.id?r.classList.remove("d-none"):r.classList.add("d-none"),r.addEventListener("click",(function(){i.deleteProject(e.id)}))}))})),e.appendChild(function(){var e=document.createElement("div"),n=document.createElement("form"),d=document.createElement("input"),a=document.createElement("button"),i=t();d.placeholder="Project Name",d.setAttribute("required",""),d.maxLength=25,a.innerText="Create",a.classList.add("btn"),n.appendChild(d),n.appendChild(a),n.classList.add("d-none","padding");var o=document.createElement("div");return o.innerText="New project +",o.classList.add("new-btn"),o.addEventListener("click",(function(){n.classList.contains("d-none")?(n.classList.remove("d-none"),n.classList.add("d-flex","flex-column")):(n.classList.remove("d-flex"),n.classList.add("d-none"))})),n.addEventListener("submit",(function(){var e=d.value;i.setProject(e)})),e.appendChild(o),e.appendChild(n),e}()),e}()),n.appendChild(o(d.getProjects()[0].title,d.getProjects()[0].id))})();